define(["jquery","media_videojs/loader"],function(a,b){var c=function(){var c=function(){var a=["youtube.com","youtu.be","vimeo.com","archive.org/embed","youtube-nocookie.com","embed.ted.com","embed-ssl.ted.com","kickstarter.com","video.html","simmons.tegrity.com","dailymotion.com"],b=[".mediaplugin object:not(.media-responsive object, .felement.feditor object, .vjs-tech)",".mediaplugin embed:not(.media-responsive embed, .felement.feditor embed, .vjs-tech)"];for(var c in a){var d=a[c];b.push('iframe:not(.media-responsive iframe, .felement.feditor iframe, .vjs-tech)[src*="'+d+'"]')}var e=b.join(",");return e},d=function(b,d){b||(b=a(c())),a(b).each(function(){var b,c,d,e=a(this).parent(),f=this.tagName.toLowerCase();if("iframe"===f||"object"===f||"embed"===f){if(a(e).hasClass("media-responsive"))return!0;if(!a(e).hasClass("mediaplugin")){var g=a("<div></div>");a(this).after(g),a(g).append(a(this)),e=g}}if(b=a(this).attr("width")||a(this).width(),c=a(this).attr("height")||a(this).height(),isNaN(b)&&isNaN(c)||(b+=" ",c+=" "),(b.indexOf("%")>-1&&c.indexOf("%")==-1||b.indexOf("%")==-1&&c.indexOf("%")>-1)&&(b=a(this).width(),c=a(this).height()),b=parseInt(b),c=parseInt(c),d=c/b,"iframe"===f&&(a(this).removeAttr("width"),a(this).removeAttr("height")),!e.find(".media-responsive-pad").length){var h=100*d,i='<div class="media-responsive-pad" style="padding-top:'+h+'%"></div>';e.append(i)}e.addClass("media-responsive")}),"function"==typeof d&&d()};this.init=function(){var e=function(){var e=function(b){if(!b.tagName)return!1;var d=c();return a(b).is(d)?a(b):a(b).find(d)},f=new MutationObserver(function(a){a.forEach(function(a){for(var c in a.addedNodes){var f=a.addedNodes[c],g=e(f);g&&(b.setUp(),d(g))}})}),g={attributes:!1,childList:!0,characterData:!1,subtree:!0},h=document.body;f.observe(h,g)};a(document).ready(function(){d(null,e)})}};return new c});